<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <style>
      body {
        margin: 0;
      }
      #box1 {
        height: 100px;
        width: 100px;
        background-color: red;
        position: absolute;
        z-index: 10;
      }
      #box2 {
        height: 100px;
        width: 100px;
        background-color: yellow;
        position: absolute;
        z-index: 9;
      }
      #box3 {
        height: 100px;
        width: 100px;
        background-color: green;
        position: absolute;
        z-index: 8;
      }
      #box4 {
        height: 100px;
        width: 100px;
        background-color: black;
        position: absolute;
      }
      #box5 {
        height: 100px;
        width: 100px;
        background-color: pink;
        position: absolute;
      }
    </style>
  </head>
  <body>
    <div id="box1"></div>
    <div id="box2"></div>
    <div id="box3"></div>
    <div id="box4"></div>
    <div id="box5"></div>
    <script>
      /*  function Drag(id) {
        this.disX = 0;
        this.disY = 0;
        this.elem = document.getElementById(id);
      }
      Drag.prototype.init = function() {
        var _this = this;
        _this.elem.onmousedown = function(ev) {
          _this.fnDown(ev);
          document.onmousemove = function(ev) {
            _this.fnMove(ev);
          };
          document.onmouseup = function(ev) {
            _this.fnUp(ev);
          };
          return false;
        };
      };
      Drag.prototype.fnDown = function(ev) {
        this.disX = ev.pageX - this.elem.offsetLeft;
        this.disY = ev.pageY - this.elem.offsetTop;
      };

      Drag.prototype.fnMove = function(ev) {
        this.elem.style.left = ev.pageX - this.disX + "px";
        this.elem.style.top = ev.pageY - this.disY + "px";
      };

      Drag.prototype.fnUp = function() {
        document.onmousemove = null;
        document.onmouseup = null;
      };

      var d1 = new Drag("box");
      d1.init();
      function ChildDrag(id) {
        Drag.call(this, id);
      }

      extend(ChildDrag, Drag);
      function extend(subs, sups) {
        for (var attr in Drag.prototype) {
          subs.prototype[attr] = sups.prototype[attr];
        }
      }
      // 类的多态
      ChildDrag.prototype.fnMove = function(ev) {
        var l = ev.pageX - this.disX;
        var t = ev.pageY - this.disY;
        if (l < 0) {
          l = 0;
        } else if (l > window.innerWidth - this.elem.offsetWidth) {
          l = window.innerWidth - this.elem.offsetWidth;
        }
        if (t < 0) {
          t = 0;
        } else if (t > window.innerHeight - this.elem.offsetHeight) {
          t = window.innerHeight - this.elem.offsetHeight;
        }

        this.elem.style.left = l + "px";
        this.elem.style.top = t + "px";
      };
      var d2 = new ChildDrag("box1");
      d2.init();
      window.onresize = function() {
        d2.init();
      };
 */

      /*  function Drag(opts) {
        this.disX = 0;
        this.disY = 0;
        this.range = opts.range || false;
        this.elem = document.getElementById(opts.id);
      }
      Drag.prototype.init = function() {
        var _this = this;
        _this.elem.onmousedown = function(ev) {
          _this.fnDown(ev);
          document.onmousemove = function(ev) {
            _this.fnMove(ev);
          };
          document.onmouseup = function(ev) {
            _this.fnUp(ev);
          };
          return false;
        };
      };
      Drag.prototype.fnDown = function(ev) {
        this.disX = ev.pageX - this.elem.offsetLeft;
        this.disY = ev.pageY - this.elem.offsetTop;
      };

      Drag.prototype.fnMove = function(ev) {
        this.elem.style.left = ev.pageX - this.disX + "px";
        this.elem.style.top = ev.pageY - this.disY + "px";
        if (this.range) {
          var l = ev.pageX - this.disX;
          var t = ev.pageY - this.disY;
          if (l < 0) {
            l = 0;
          } else if (l > window.innerWidth - this.elem.offsetWidth) {
            l = window.innerWidth - this.elem.offsetWidth;
          }
          if (t < 0) {
            t = 0;
          } else if (t > window.innerHeight - this.elem.offsetHeight) {
            t = window.innerHeight - this.elem.offsetHeight;
          }

          this.elem.style.left = l + "px";
          this.elem.style.top = t + "px";
        } else {
          this.elem.style.left = ev.pageX - this.disX + "px";
          this.elem.style.top = ev.pageY - this.disY + "px";
        }
      };

      Drag.prototype.fnUp = function() {
        document.onmousemove = null;
        document.onmouseup = null;
      };

      var d1 = new Drag({ id: "box1", range: true });
      d1.init();

      var d2 = new Drag({ id: "box2" });
      d2.init(); */
    </script>
  </body>
</html>
